# 07.this

#### 1.this介绍

- this被自动定义在所有函数的作用域中。
- this的特点
  * 函数的调用方式决定了this的值，运行期间绑定
  * 每次函数被调用时this的值也可能会不同
  * this不能被赋值
  * this不进行作用域传递
- this的作用
  * **复用代码**
  * 提供一个更加优雅而灵便的方案，传递一个隐式的对象引用让代码变得更加简洁。

#### 2.this绑定规则

- 绑定规则

  * 默认绑定（独立函数调用，无法应用其他规则时的默认规则）
    - 非严格模式，this会绑定到全局对象window上。
    - 严格模式，this会绑定到undefined。
    - 函数嵌套时，需注意this不进行作用域传递。
    - 函数嵌套时，this绑定（变量_this、that、self锁定this，bind()锁定）
  * 隐式绑定（调用位置是否有上下文对象）————就近原则
    - 函数作为**对象**的方法调用时，函数上下文指向这个对象。
    - **数组**中存放函数，被数组索引调用。this上下文指向这个数组。
    - 对象属性引用链中只有最顶层或者说最后一层会影响调用位置。

  * 显示绑定
    - 使用call()、apply()、bind ()方法显示改变this的指向为指定对象。
  * new绑定（new 来调用函数，或者说发生构造函数调用时，会自动执行下面的操作。）
    - 创建（或者说构造）一个全新的对象。
    -  这个新对象会被执行 [[ 原型 ]] 连接。
    -  这个新对象会绑定到函数调用的 this。
    -  如果函数没有返回其他对象，那么 new 表达式中的函数调用会自动返回 this (新对象)。

- 绑定优先级
  * new绑定 **>** 显示绑定 **>** 隐式绑定 **>** 默认绑定
- 判断this的顺序
  * 若函数在new中调用，即this绑定的是新创建的对象。
  * 若有call()、apply()、bind ()，即绑定指定对象。
  * 若在某个上下文中调用，即this绑定的是这个上下文对象。
  * 若都不是，即是默认绑定，再看是否是在严格模式下。

​                                                                                                                                                                                                                                                      