# 函数的定义和调用 #

1. 执行上下文

   - 函数每调用一次，就会创建一个新的执行上下文

   -  函数执行结束，相应的执行上下文销毁

     执行上下文栈

     - 执行上下文栈按照函数的调用顺序来管理执行上下文

     -  栈底永远是全局上下文，栈顶是当前正在执行的函数

       调用栈

       - 代码执行时JavaScript 引擎会以栈的方式来处理和追踪函数调用

       - 栈底对应的是全局上下文环境，而栈顶对应的是当前正在执行的上下文环境

         ##### return语句

         返回值

         终止函数的执行（销毁当前执行上下文，弹出调用栈）

         每个执行上下文都有一个与之相关的变量对象和一个作用域链

2. 变量对象

   * 函数的所有形参

   * 当前上下文中的所有函数声明

   * 当前上下文中所有变量声明

     * js代码的整个执行过程，分为两部分，代码编译和代码执行。预编译的任务：声明提升

     * 声明提升：把所有的变量声明和函数声明提升到当前作用域的最前面

       先提升函数声明，在提升变量声明，赋值留在原地。

       * 浏览器中的全局上下文的变量对象

         变量对象就是 window 对象

         不会变成活动对象

         在页面关闭前一直存在

3. 作用域链

* 作用域就是变量与函数的可访问范围，控制着变量与函数的可见性和生命周期
* 作用域类型：全局作用域   函数作用域  块作用域（任何一对花括号 { } 中的语句集都属于一个块，在这之中定义的所有变量在代码块外都是不可见的，我们称之为块级作用域）
* 作用域的两种工作模式：词法作用域（静态）  动态作用域    new Function创建的函数对象不遵从静态词法作用域，且总是在全局作用域中执行

* [[scope]]属性   虚拟属性，无法访问和修改   函数创建时生成的属性，保存着这个函数的父作用域的作用域链
* 

![1551663516203](C:\Users\a\AppData\Roaming\Typora\typora-user-images\1551663516203.png)

![1551664113658](C:\Users\a\AppData\Roaming\Typora\typora-user-images\1551664113658.png)



 call() 、apply()可以看作是某个对象的方法，通过调用方法的形式来间接调用函数。bind() 就是将某个函数绑定到某个对象上。



![1551668614077](C:\Users\a\AppData\Roaming\Typora\typora-user-images\1551668614077.png)